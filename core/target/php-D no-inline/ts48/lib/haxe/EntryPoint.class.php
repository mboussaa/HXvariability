<?php

// Generated by Haxe 3.3.0
class haxe_EntryPoint {
	public function __construct(){}
	static $sleepLock;
	static $mutex;
	static $pending;
	static $threadCount = 0;
	static function processEvents() {
		while(true) {
			haxe_EntryPoint::$mutex->acquire();
			$f = haxe_EntryPoint::$pending->shift();
			haxe_EntryPoint::$mutex->release();
			if($f === null) {
				break;
			}
			call_user_func($f);
			unset($f);
		}
		$tmp = null;
		if(!haxe_MainLoop::hasEvents()) {
			$tmp = haxe_EntryPoint::$threadCount === 0;
		} else {
			$tmp = false;
		}
		if($tmp) {
			return -1;
		}
		return haxe_MainLoop::tick();
	}
	static function run() {
		while(true) {
			$nextTick = haxe_EntryPoint::processEvents();
			if($nextTick < 0) {
				break;
			}
			if($nextTick > 0) {
				haxe_EntryPoint::$sleepLock->wait($nextTick);
			}
			unset($nextTick);
		}
	}
	function __toString() { return 'haxe.EntryPoint'; }
}
haxe_EntryPoint::$sleepLock = new haxe__EntryPoint_Lock();
haxe_EntryPoint::$mutex = new haxe__EntryPoint_Mutex();
haxe_EntryPoint::$pending = new _hx_array(array());
